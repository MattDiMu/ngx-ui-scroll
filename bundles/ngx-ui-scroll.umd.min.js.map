{"version":3,"sources":["ngx-ui-scroll.umd.js"],"names":["global","factory","exports","module","require","define","amd","ng","ngxUiScroll","core","common","Rx","this","Observable","BehaviorSubject","defaultSettings","startIndex","bufferSize","padding","infinite","Settings","settings","debug","itemIdPrefix","clipAfterFetchOnly","Object","assign","Direction","forward","backward","Routines","getScrollPosition","element","setScrollPosition","value","getParams","getBoundingClientRect","getSize","getScrollableSize","getRectEdge","params","direction","opposite","getEdge","getEdge2","relativeElement","offsetTop","scrollTop","hideElement","style","display","Padding","querySelector","defineProperty","prototype","get","parseInt","height","set","enumerable","configurable","ViewportPadding","Viewport","elementRef","host","nativeElement","scrollable","parentElement","syntheticScrollPosition","children","scrollPosition","saveScrollPosition","lastPosition","getLastPosition","getBufferPadding","getLimit","ItemCache","item","$index","nodeId","data","Cache","items","add","found","find","i","push","index","Index","Buffer","$items","bof","eof","lastIndex","cache","_items","length","setLastIndices","next","getFirstVisibleItemIndex","invisible","getLastVisibleItemIndex","getEdgeVisibleItemIndex","getFirstVisibleItem","getLastVisibleItem","getEdgeVisibleItem","FetchByDirection","count","reset","shouldFetch","_newItemsData","FetchModel","concat","newItemsData","ClipByDirection","shouldClip","size","ClipModel","checkDatasource","datasource","Error","Workflow","context","_this","countDone","resolver","create","_observer","observer","bindData","changeDetector","markForCheck","viewport","buffer","fetch","clip","pending","start","log","Promise","resolve","continue","finalize","end","done","fail","error","dispose","complete","args","_i","arguments","console","apply","ShouldFetch","run","workflow","shouldFetchByDirection","paddingEdge","limit","setStartIndex","back","Fetch","result","fetchByDirection","all","then","success","reject","_getResult","_get","subscribe","Item","hide","ProcessFetch","runByDirection","map","String","Render","hasNewItems","setTimeout","setElements","j","nodes","id","AdjustFetch","processFetchedItems","Math","abs","top","bottom","adjustForward","adjustBackward","left","position","paddingForward","_paddingSize","max","_scrollPosition","paddingBackward","paddingSize","paddingDiff","diff","ShouldClip","shouldClipByDirection","itemEdge","viewportLimit","firstIndex","firstItemEdge","lastItemEdge","toRemove","Clip","filter","WorkflowRunner","defaultDirection","initialize","flow","onScrollListener","renderer","listen","$event","scroll","itemsSubscription","flowResolverSubscription","bind","newDirection","directionQueue","catch","unsubscribe","UiScrollComponent","ngOnInit","workflowRunner","ngOnDestroy","decorators","type","Component","selector","changeDetection","ChangeDetectionStrategy","OnPush","template","ctorParameters","ChangeDetectorRef","ElementRef","Renderer2","UiScrollDirective","templateRef","viewContainer","templateView","createEmbeddedView","compFactory","resolveComponentFactory","componentRef","createComponent","injector","rootNodes","instance","Directive","TemplateRef","ViewContainerRef","ComponentFactoryResolver","propDecorators","uiScrollOf","Input","UiScrollModule","NgModule","declarations","imports","CommonModule","entryComponents","providers","ɵa","ɵb"],"mappings":"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","file":"ngx-ui-scroll.umd.min.js.map","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('rxjs/Observable'), require('rxjs/BehaviorSubject')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', '@angular/core', '@angular/common', 'rxjs/Observable', 'rxjs/BehaviorSubject'], factory) :\n\t(factory((global.ng = global.ng || {}, global.ng.ngxUiScroll = {}),global.ng.core,global.ng.common,global.Rx,global.Rx));\n}(this, (function (exports,core,common,Observable,BehaviorSubject) { 'use strict';\n\n/**\r\n * @license ngx-ui-scroll\r\n * MIT license\r\n */\r\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar defaultSettings = {\r\n    startIndex: 1,\r\n    bufferSize: 5,\r\n    padding: 0.5,\r\n    infinite: false\r\n};\r\nvar Settings = /** @class */ (function () {\r\n    function Settings(settings) {\r\n        // internal settings\r\n        this.debug = false;\r\n        this.itemIdPrefix = 'ui-scroll-0-';\r\n        this.clipAfterFetchOnly = false;\r\n        Object.assign(this, defaultSettings);\r\n        if (settings && typeof settings === 'object') {\r\n            Object.assign(this, settings);\r\n        }\r\n    }\r\n    return Settings;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/** @enum {string} */\r\nvar Direction = {\r\n    forward: 'forward',\r\n    backward: 'backward',\r\n};\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Routines = /** @class */ (function () {\r\n    function Routines() {\r\n    }\r\n    /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    Routines.getScrollPosition = /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        return element['scrollTop'];\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @param {?} value\r\n     * @return {?}\r\n     */\r\n    Routines.setScrollPosition = /**\r\n     * @param {?} element\r\n     * @param {?} value\r\n     * @return {?}\r\n     */\r\n    function (element, value) {\r\n        element['scrollTop'] = value;\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    Routines.getParams = /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        return element.getBoundingClientRect();\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    Routines.getSize = /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        return Routines.getParams(element)['height'];\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    Routines.getScrollableSize = /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        return element['scrollHeight'];\r\n    };\r\n    /**\r\n     * @param {?} params\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Routines.getRectEdge = /**\r\n     * @param {?} params\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (params, direction, opposite) {\r\n        var /** @type {?} */ forward = !opposite ? Direction.forward : Direction.backward;\r\n        return params[direction === forward ? 'bottom' : 'top'];\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Routines.getEdge = /**\r\n     * @param {?} element\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (element, direction, opposite) {\r\n        var /** @type {?} */ params = Routines.getParams(element);\r\n        return Routines.getRectEdge(params, direction, opposite);\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @param {?} direction\r\n     * @param {?=} relativeElement\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Routines.getEdge2 = /**\r\n     * @param {?} element\r\n     * @param {?} direction\r\n     * @param {?=} relativeElement\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (element, direction, relativeElement, opposite) {\r\n        var /** @type {?} */ result = element.offsetTop - (relativeElement ? relativeElement.scrollTop : 0) +\r\n            (direction === (!opposite ? Direction.forward : Direction.backward) ? Routines.getSize(element) : 0);\r\n        return result;\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    Routines.hideElement = /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        element.style.display = 'none';\r\n    };\r\n    return Routines;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Padding = /** @class */ (function () {\r\n    function Padding(element, direction) {\r\n        this.element = null;\r\n        this.element = element.querySelector(\"[data-padding-\" + direction + \"]\");\r\n        this.direction = direction;\r\n    }\r\n    Object.defineProperty(Padding.prototype, \"size\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return parseInt(this.element.style.height, 10) || 0;\r\n        },\r\n        set: /**\r\n         * @param {?} value\r\n         * @return {?}\r\n         */\r\n        function (value) {\r\n            this.element.style.height = value + \"px\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Padding.prototype.getEdge = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return Routines.getEdge(this.element, this.direction, true);\r\n    };\r\n    return Padding;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar ViewportPadding = /** @class */ (function () {\r\n    function ViewportPadding(element) {\r\n        this.forward = new Padding(element, Direction.forward);\r\n        this.backward = new Padding(element, Direction.backward);\r\n    }\r\n    return ViewportPadding;\r\n}());\r\nvar Viewport = /** @class */ (function () {\r\n    function Viewport(elementRef, settings) {\r\n        this.settings = settings;\r\n        this.host = elementRef.nativeElement;\r\n        this.scrollable = elementRef.nativeElement.parentElement;\r\n        this.padding = new ViewportPadding(this.host);\r\n        this.syntheticScrollPosition = null;\r\n    }\r\n    Object.defineProperty(Viewport.prototype, \"children\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return this.host.children;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Viewport.prototype, \"scrollPosition\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return Routines.getScrollPosition(this.scrollable);\r\n        },\r\n        set: /**\r\n         * @param {?} value\r\n         * @return {?}\r\n         */\r\n        function (value) {\r\n            Routines.setScrollPosition(this.scrollable, value);\r\n            this.syntheticScrollPosition = this.scrollPosition;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Viewport.prototype.saveScrollPosition = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.lastPosition = this.scrollPosition;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Viewport.prototype.getLastPosition = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.lastPosition;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Viewport.prototype.getSize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return Routines.getSize(this.scrollable);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Viewport.prototype.getScrollableSize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return Routines.getScrollableSize(this.scrollable);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Viewport.prototype.getBufferPadding = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.getSize() * this.settings.padding;\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Viewport.prototype.getEdge = /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (direction, opposite) {\r\n        return Routines.getEdge(this.scrollable, direction, opposite);\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Viewport.prototype.getLimit = /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (direction, opposite) {\r\n        return this.getEdge(direction, opposite) +\r\n            (direction === (!opposite ? Direction.forward : Direction.backward) ? 1 : -1) * this.getBufferPadding();\r\n    };\r\n    return Viewport;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar ItemCache = /** @class */ (function () {\r\n    function ItemCache(item) {\r\n        this.$index = item.$index;\r\n        this.nodeId = item.nodeId;\r\n        this.data = item.data;\r\n        this.params = item.getParams();\r\n    }\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    ItemCache.prototype.getEdge = /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (direction, opposite) {\r\n        return Routines.getRectEdge(this.params, direction, opposite);\r\n    };\r\n    return ItemCache;\r\n}());\r\nvar Cache = /** @class */ (function () {\r\n    function Cache() {\r\n        this.items = [];\r\n    }\r\n    /**\r\n     * @param {?} item\r\n     * @return {?}\r\n     */\r\n    Cache.prototype.add = /**\r\n     * @param {?} item\r\n     * @return {?}\r\n     */\r\n    function (item) {\r\n        var /** @type {?} */ found = this.items.find(function (i) { return i.$index === item.$index; });\r\n        if (found) {\r\n            found.data = item.data;\r\n            found.params = item.getParams();\r\n        }\r\n        else {\r\n            // todo: do we need the list to be sorted? maybe an object?\r\n            this.items.push(new ItemCache(item));\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} index\r\n     * @return {?}\r\n     */\r\n    Cache.prototype.get = /**\r\n     * @param {?} index\r\n     * @return {?}\r\n     */\r\n    function (index) {\r\n        return this.items.find(function (i) { return i.$index === index; });\r\n    };\r\n    return Cache;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Index = /** @class */ (function () {\r\n    function Index() {\r\n        this.forward = null;\r\n        this.backward = null;\r\n    }\r\n    return Index;\r\n}());\r\nvar Buffer = /** @class */ (function () {\r\n    function Buffer() {\r\n        this.$items = new BehaviorSubject.BehaviorSubject(null);\r\n        this.items = [];\r\n        this.bof = false;\r\n        this.eof = false;\r\n        this.lastIndex = new Index();\r\n        this.cache = new Cache();\r\n    }\r\n    Object.defineProperty(Buffer.prototype, \"items\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return this._items;\r\n        },\r\n        set: /**\r\n         * @param {?} items\r\n         * @return {?}\r\n         */\r\n        function (items) {\r\n            this._items = items;\r\n            if (items.length) {\r\n                this.setLastIndices();\r\n            }\r\n            this.$items.next(items);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Buffer.prototype.setLastIndices = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.lastIndex[Direction.backward] = this.items[0].$index;\r\n        this.lastIndex[Direction.forward] = this.items[this.items.length - 1].$index;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Buffer.prototype.getFirstVisibleItemIndex = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var /** @type {?} */ length = this.items.length;\r\n        for (var /** @type {?} */ i = 0; i < length; i++) {\r\n            if (!this.items[i].invisible) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Buffer.prototype.getLastVisibleItemIndex = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        for (var /** @type {?} */ i = this.items.length - 1; i >= 0; i--) {\r\n            if (!this.items[i].invisible) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Buffer.prototype.getEdgeVisibleItemIndex = /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (direction, opposite) {\r\n        return direction === (!opposite ? Direction.forward : Direction.backward) ?\r\n            this.getLastVisibleItemIndex() : this.getFirstVisibleItemIndex();\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Buffer.prototype.getFirstVisibleItem = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var /** @type {?} */ index = this.getFirstVisibleItemIndex();\r\n        if (index >= 0) {\r\n            return this.items[index];\r\n        }\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Buffer.prototype.getLastVisibleItem = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var /** @type {?} */ index = this.getLastVisibleItemIndex();\r\n        if (index >= 0) {\r\n            return this.items[index];\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Buffer.prototype.getEdgeVisibleItem = /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (direction, opposite) {\r\n        return direction === (!opposite ? Direction.forward : Direction.backward) ?\r\n            this.getLastVisibleItem() : this.getFirstVisibleItem();\r\n    };\r\n    return Buffer;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar FetchByDirection = /** @class */ (function () {\r\n    function FetchByDirection() {\r\n        this.count = 0;\r\n        this.reset();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    FetchByDirection.prototype.reset = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var /** @type {?} */ count = this.count;\r\n        this.shouldFetch = false;\r\n        this.startIndex = null;\r\n        this._newItemsData = null;\r\n        this.items = null;\r\n        this.count = count;\r\n    };\r\n    Object.defineProperty(FetchByDirection.prototype, \"newItemsData\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return this._newItemsData;\r\n        },\r\n        set: /**\r\n         * @param {?} items\r\n         * @return {?}\r\n         */\r\n        function (items) {\r\n            this._newItemsData = items;\r\n            this.count++;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FetchByDirection;\r\n}());\r\nvar FetchModel = /** @class */ (function () {\r\n    function FetchModel() {\r\n        this.forward = new FetchByDirection();\r\n        this.backward = new FetchByDirection();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    FetchModel.prototype.reset = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this[Direction.forward].reset();\r\n        this[Direction.backward].reset();\r\n    };\r\n    Object.defineProperty(FetchModel.prototype, \"count\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return this[Direction.backward].count + this[Direction.forward].count;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FetchModel.prototype, \"items\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return (this[Direction.backward].items ? this[Direction.backward].items : []).concat(this[Direction.forward].items ? this[Direction.forward].items : []);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FetchModel.prototype, \"shouldFetch\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return this[Direction.forward].shouldFetch || this[Direction.backward].shouldFetch;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FetchModel.prototype, \"hasNewItems\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return !!(this[Direction.forward].newItemsData || this[Direction.backward].newItemsData);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FetchModel;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar ClipByDirection = /** @class */ (function () {\r\n    function ClipByDirection() {\r\n        this.shouldClip = false;\r\n        this.size = null;\r\n    }\r\n    return ClipByDirection;\r\n}());\r\nvar ClipModel = /** @class */ (function () {\r\n    function ClipModel() {\r\n        this.forward = new ClipByDirection();\r\n        this.backward = new ClipByDirection();\r\n    }\r\n    Object.defineProperty(ClipModel.prototype, \"shouldClip\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return this[Direction.forward].shouldClip || this[Direction.backward].shouldClip;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ClipModel;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar checkDatasource = function (datasource) {\r\n    if (!datasource) {\r\n        throw new Error('No datasource provided');\r\n    }\r\n    if (!('get' in datasource)) {\r\n        throw new Error('Datasource get method is not implemented');\r\n    }\r\n    if (typeof datasource.get !== 'function') {\r\n        throw new Error('Datasource get is not a function');\r\n    }\r\n    if (datasource.get.length < 2) {\r\n        throw new Error('Datasource get method invalid signature');\r\n    }\r\n    return datasource;\r\n};\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Workflow = /** @class */ (function () {\r\n    function Workflow(context) {\r\n        var _this = this;\r\n        this.count = 0;\r\n        this.countDone = 0;\r\n        this.resolver = Observable.Observable.create(function (_observer) { return _this.observer = _observer; });\r\n        this.bindData = function () {\r\n            _this.next = true;\r\n            context.changeDetector.markForCheck();\r\n        };\r\n        this.datasource = checkDatasource(context.datasource);\r\n        this.settings = new Settings(context.datasource.settings);\r\n        this.viewport = new Viewport(context.elementRef, this.settings);\r\n        this.buffer = new Buffer();\r\n        this.fetch = new FetchModel();\r\n        this.clip = new ClipModel();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.reset = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.pending = false;\r\n        this.direction = null;\r\n        this.next = false;\r\n        this.fetch.reset();\r\n        this.clip = new ClipModel();\r\n    };\r\n    /**\r\n     * @param {?=} direction\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.start = /**\r\n     * @param {?=} direction\r\n     * @return {?}\r\n     */\r\n    function (direction) {\r\n        this.count++;\r\n        this.log(\"---=== Workflow \" + this.count + \" run\");\r\n        this.reset();\r\n        this.pending = true;\r\n        this.direction = direction || null;\r\n        return Promise.resolve(this);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.continue = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return Promise.resolve(this);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.finalize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        // stop 1 cycle\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.end = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.pending = false;\r\n        this.countDone++;\r\n        this.viewport.saveScrollPosition();\r\n        this.finalize();\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.done = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.log(\"---=== Workflow \" + this.count + \" done\");\r\n        this.end();\r\n        this.observer.next(this.next);\r\n    };\r\n    /**\r\n     * @param {?} error\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.fail = /**\r\n     * @param {?} error\r\n     * @return {?}\r\n     */\r\n    function (error) {\r\n        this.log(\"---=== Workflow \" + this.count + \" fail\");\r\n        this.end();\r\n        this.observer.error(error);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.dispose = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.observer.complete();\r\n    };\r\n    /**\r\n     * @param {...?} args\r\n     * @return {?}\r\n     */\r\n    Workflow.prototype.log = /**\r\n     * @param {...?} args\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (this.settings.debug) {\r\n            console.log.apply(this, args);\r\n        }\r\n    };\r\n    return Workflow;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar ShouldFetch = /** @class */ (function () {\r\n    function ShouldFetch() {\r\n    }\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    ShouldFetch.run = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        if (workflow.direction !== Direction.backward) {\r\n            ShouldFetch.shouldFetchByDirection(Direction.forward, workflow);\r\n        }\r\n        if (workflow.direction !== Direction.forward) {\r\n            ShouldFetch.shouldFetchByDirection(Direction.backward, workflow);\r\n        }\r\n        return Promise.resolve(workflow);\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    ShouldFetch.shouldFetchByDirection = /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (direction, workflow) {\r\n        var /** @type {?} */ paddingEdge = workflow.viewport.padding[direction].getEdge();\r\n        var /** @type {?} */ limit = workflow.viewport.getLimit(direction);\r\n        if ((direction === Direction.forward && workflow.buffer.eof) ||\r\n            (direction === Direction.backward && workflow.buffer.bof)) {\r\n            workflow.fetch[direction].shouldFetch = false;\r\n        }\r\n        else {\r\n            workflow.fetch[direction].shouldFetch =\r\n                (direction === Direction.forward) ? paddingEdge < limit : paddingEdge > limit;\r\n        }\r\n        if (workflow.fetch[direction].shouldFetch) {\r\n            ShouldFetch.setStartIndex(direction, workflow);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    ShouldFetch.setStartIndex = /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (direction, workflow) {\r\n        var /** @type {?} */ forward = direction === Direction.forward;\r\n        var /** @type {?} */ back = -workflow.settings.bufferSize;\r\n        var /** @type {?} */ start;\r\n        if (workflow.buffer.lastIndex[direction] === null) {\r\n            start = workflow.settings.startIndex + (forward ? 0 : back);\r\n        }\r\n        else {\r\n            start = workflow.buffer.lastIndex[direction] + (forward ? 1 : back);\r\n        }\r\n        workflow.fetch[direction].startIndex = start;\r\n    };\r\n    return ShouldFetch;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Fetch = /** @class */ (function () {\r\n    function Fetch() {\r\n    }\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    Fetch.run = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        var /** @type {?} */ result = [];\r\n        if (workflow.fetch[Direction.backward].shouldFetch) {\r\n            result.push(Fetch.fetchByDirection(Direction.backward, workflow));\r\n        }\r\n        if (workflow.fetch[Direction.forward].shouldFetch) {\r\n            result.push(Fetch.fetchByDirection(Direction.forward, workflow));\r\n        }\r\n        return Promise.all(result).then(function () { return workflow; });\r\n    };\r\n    /**\r\n     * @param {?} data\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    Fetch.success = /**\r\n     * @param {?} data\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (data, direction, workflow) {\r\n        workflow.log(\"resolved \" + data.length + \" \" + direction + \" items \" +\r\n            (\"(index = \" + workflow.fetch[direction].startIndex + \", count = \" + workflow.settings.bufferSize + \")\"));\r\n        workflow.fetch[direction].newItemsData = data;\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    Fetch.fetchByDirection = /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (direction, workflow) {\r\n        var /** @type {?} */ result = new Promise(function (resolve, reject) {\r\n            var /** @type {?} */ success = function (data) {\r\n                Fetch.success(data, direction, workflow);\r\n                resolve(true);\r\n            };\r\n            var /** @type {?} */ _get = /** @type {?} */ (workflow.datasource.get);\r\n            var /** @type {?} */ _getResult = _get(workflow.fetch[direction].startIndex, workflow.settings.bufferSize, success, reject);\r\n            if (_getResult && typeof _getResult.then === 'function') {\r\n                // DatasourceGetPromise\r\n                _getResult.then(success, reject);\r\n            }\r\n            else if (_getResult && typeof _getResult.subscribe === 'function') {\r\n                // DatasourceGetObservable\r\n                _getResult.subscribe(success, reject);\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    return Fetch;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Item = /** @class */ (function () {\r\n    function Item($index, data, nodeId) {\r\n        this.$index = $index;\r\n        this.data = data;\r\n        this.nodeId = nodeId;\r\n        this.invisible = true;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Item.prototype.getParams = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return Routines.getParams(this.element);\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    Item.prototype.getEdge = /**\r\n     * @param {?} direction\r\n     * @param {?=} opposite\r\n     * @return {?}\r\n     */\r\n    function (direction, opposite) {\r\n        return Routines.getEdge(this.element, direction, opposite);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    Item.prototype.hide = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        Routines.hideElement(this.element);\r\n    };\r\n    return Item;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar ProcessFetch = /** @class */ (function () {\r\n    function ProcessFetch() {\r\n    }\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    ProcessFetch.run = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        ProcessFetch.runByDirection(workflow, Direction.backward);\r\n        ProcessFetch.runByDirection(workflow, Direction.forward);\r\n        return workflow;\r\n    };\r\n    /**\r\n     * @param {?} workflow\r\n     * @param {?} direction\r\n     * @return {?}\r\n     */\r\n    ProcessFetch.runByDirection = /**\r\n     * @param {?} workflow\r\n     * @param {?} direction\r\n     * @return {?}\r\n     */\r\n    function (workflow, direction) {\r\n        var /** @type {?} */ fetch = workflow.fetch[direction];\r\n        if (!fetch.newItemsData) {\r\n            // no fetch\r\n            return;\r\n        }\r\n        var /** @type {?} */ eof = direction === Direction.forward ? 'eof' : 'bof';\r\n        workflow.buffer[eof] = fetch.newItemsData.length !== workflow.settings.bufferSize;\r\n        if (!fetch.newItemsData.length) {\r\n            // empty result\r\n            return;\r\n        }\r\n        fetch.items = fetch.newItemsData.map(function (item, index) {\r\n            var /** @type {?} */ $index = fetch.startIndex + index;\r\n            var /** @type {?} */ nodeId = workflow.settings.itemIdPrefix + String($index);\r\n            return new Item($index, item, nodeId);\r\n        });\r\n        if (direction === Direction.forward) {\r\n            workflow.buffer.items = workflow.buffer.items.concat(fetch.items);\r\n        }\r\n        else {\r\n            workflow.buffer.items = fetch.items.concat(workflow.buffer.items);\r\n        }\r\n    };\r\n    return ProcessFetch;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Render = /** @class */ (function () {\r\n    function Render() {\r\n    }\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    Render.run = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        if (!workflow.fetch.hasNewItems) {\r\n            return workflow;\r\n        }\r\n        workflow.bindData();\r\n        return new Promise(function (resolve, reject) {\r\n            return setTimeout(function () {\r\n                var /** @type {?} */ error = Render.setElements(workflow);\r\n                if (!error) {\r\n                    resolve(workflow);\r\n                }\r\n                else {\r\n                    reject(error);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    Render.setElements = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        var /** @type {?} */ items = workflow.fetch.items;\r\n        for (var /** @type {?} */ j = items.length - 1; j >= 0; j--) {\r\n            var /** @type {?} */ nodes = workflow.viewport.children;\r\n            for (var /** @type {?} */ i = nodes.length - 1; i >= 0; i--) {\r\n                if (nodes[i].id === items[j].nodeId) {\r\n                    items[j].element = nodes[i];\r\n                }\r\n            }\r\n            if (!items[j].element) {\r\n                // todo: do we really need this check?\r\n                return new Error('Can not associate item with element');\r\n            }\r\n        }\r\n    };\r\n    return Render;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar AdjustFetch = /** @class */ (function () {\r\n    function AdjustFetch() {\r\n    }\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    AdjustFetch.run = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        AdjustFetch.runByDirection(Direction.forward, workflow);\r\n        AdjustFetch.runByDirection(Direction.backward, workflow);\r\n        return workflow;\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    AdjustFetch.runByDirection = /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (direction, workflow) {\r\n        var /** @type {?} */ items = workflow.fetch[direction].items;\r\n        if (!items) {\r\n            return;\r\n        }\r\n        AdjustFetch.processFetchedItems(items);\r\n        var /** @type {?} */ height = Math.abs(items[0].element.getBoundingClientRect().top -\r\n            items[items.length - 1].element.getBoundingClientRect().bottom);\r\n        if (direction === Direction.forward) {\r\n            return this.adjustForward(workflow, height);\r\n        }\r\n        else {\r\n            return this.adjustBackward(workflow, height);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} items\r\n     * @return {?}\r\n     */\r\n    AdjustFetch.processFetchedItems = /**\r\n     * @param {?} items\r\n     * @return {?}\r\n     */\r\n    function (items) {\r\n        for (var /** @type {?} */ i = items.length - 1; i >= 0; i--) {\r\n            var /** @type {?} */ element = items[i].element.children[0];\r\n            element.style.left = '';\r\n            element.style.position = '';\r\n            items[i].invisible = false;\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} workflow\r\n     * @param {?} size\r\n     * @return {?}\r\n     */\r\n    AdjustFetch.adjustForward = /**\r\n     * @param {?} workflow\r\n     * @param {?} size\r\n     * @return {?}\r\n     */\r\n    function (workflow, size) {\r\n        var /** @type {?} */ paddingForward = workflow.viewport.padding[Direction.forward];\r\n        var /** @type {?} */ _paddingSize = paddingForward.size || 0;\r\n        paddingForward.size = Math.max(_paddingSize - size, 0);\r\n    };\r\n    /**\r\n     * @param {?} workflow\r\n     * @param {?} size\r\n     * @return {?}\r\n     */\r\n    AdjustFetch.adjustBackward = /**\r\n     * @param {?} workflow\r\n     * @param {?} size\r\n     * @return {?}\r\n     */\r\n    function (workflow, size) {\r\n        var /** @type {?} */ viewport = workflow.viewport;\r\n        var /** @type {?} */ _scrollPosition = viewport.scrollPosition;\r\n        var /** @type {?} */ paddingBackward = viewport.padding[Direction.backward];\r\n        var /** @type {?} */ paddingForward = viewport.padding[Direction.forward];\r\n        // need to make \"size\" pixels in backward direction\r\n        // 1) via paddingTop\r\n        var /** @type {?} */ _paddingSize = paddingBackward.size || 0;\r\n        var /** @type {?} */ paddingSize = Math.max(_paddingSize - size, 0);\r\n        paddingBackward.size = paddingSize;\r\n        var /** @type {?} */ paddingDiff = size - (_paddingSize - paddingSize);\r\n        // 2) via scrollTop\r\n        if (paddingDiff > 0) {\r\n            size = paddingDiff;\r\n            viewport.scrollPosition += size;\r\n            var /** @type {?} */ diff = size - viewport.scrollPosition - _scrollPosition;\r\n            if (diff > 0) {\r\n                paddingSize = paddingForward.size || 0;\r\n                paddingForward.size = paddingSize + diff;\r\n                viewport.scrollPosition += diff;\r\n            }\r\n        }\r\n    };\r\n    return AdjustFetch;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar ShouldClip = /** @class */ (function () {\r\n    function ShouldClip() {\r\n    }\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    ShouldClip.run = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        if (workflow.settings.clipAfterFetchOnly && !workflow.fetch.shouldFetch) {\r\n            return workflow;\r\n        }\r\n        // todo think about optimization for case of scrolling\r\n        ShouldClip.shouldClipByDirection(Direction.forward, workflow);\r\n        ShouldClip.shouldClipByDirection(Direction.backward, workflow);\r\n        return workflow;\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    ShouldClip.shouldClipByDirection = /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (direction, workflow) {\r\n        var /** @type {?} */ items = workflow.buffer.items;\r\n        if (!items.length) {\r\n            return false;\r\n        }\r\n        var /** @type {?} */ forward = direction === Direction.forward;\r\n        var /** @type {?} */ viewport = workflow.viewport;\r\n        var /** @type {?} */ viewportLimit = viewport.getLimit(direction, true);\r\n        var /** @type {?} */ firstIndex = workflow.buffer.getFirstVisibleItemIndex();\r\n        var /** @type {?} */ lastIndex = workflow.buffer.getLastVisibleItemIndex();\r\n        var /** @type {?} */ firstItemEdge = items[firstIndex].getEdge(direction);\r\n        var /** @type {?} */ lastItemEdge = items[lastIndex].getEdge(direction);\r\n        var /** @type {?} */ i, /** @type {?} */ itemEdge, /** @type {?} */ start = -1, /** @type {?} */ end = -1;\r\n        var /** @type {?} */ getItemEdge = function (index) {\r\n            return index === firstIndex ? firstItemEdge : (index === lastIndex ? lastItemEdge :\r\n                items[index].getEdge(direction));\r\n        };\r\n        if ((forward && lastItemEdge <= viewportLimit) || (!forward && firstItemEdge >= viewportLimit)) {\r\n            // all items should be clipped\r\n            start = firstIndex;\r\n            end = lastIndex;\r\n        }\r\n        else {\r\n            if (forward) {\r\n                start = firstIndex;\r\n            }\r\n            else {\r\n                end = lastIndex;\r\n            }\r\n            for (forward ? (i = 0) : (i = lastIndex); forward ? (i <= lastIndex) : (i >= 0); forward ? i++ : i--) {\r\n                itemEdge = getItemEdge(i);\r\n                if (forward && itemEdge <= viewportLimit) {\r\n                    end = i;\r\n                }\r\n                else if (!forward && itemEdge >= viewportLimit) {\r\n                    start = i;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (start >= 0 && end >= 0) {\r\n            for (i = start; i <= end; i++) {\r\n                items[i].toRemove = true;\r\n            }\r\n            workflow.clip[direction].shouldClip = true;\r\n            workflow.clip[direction].size =\r\n                items[end].getEdge(Direction.forward) - items[start].getEdge(Direction.backward);\r\n        }\r\n    };\r\n    return ShouldClip;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar Clip = /** @class */ (function () {\r\n    function Clip() {\r\n    }\r\n    /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    Clip.run = /**\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (workflow) {\r\n        if (!workflow.clip.shouldClip) {\r\n            return workflow;\r\n        }\r\n        Clip.runByDirection(Direction.forward, workflow);\r\n        Clip.runByDirection(Direction.backward, workflow);\r\n        workflow.buffer.items = workflow.buffer.items.filter(function (item) {\r\n            if (item.toRemove) {\r\n                workflow.buffer.cache.add(item);\r\n                item.hide();\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        workflow.bindData();\r\n        return new Promise(function (resolve, reject) {\r\n            return setTimeout(function () {\r\n                resolve(workflow);\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    Clip.runByDirection = /**\r\n     * @param {?} direction\r\n     * @param {?} workflow\r\n     * @return {?}\r\n     */\r\n    function (direction, workflow) {\r\n        if (!workflow.clip[direction].shouldClip) {\r\n            return;\r\n        }\r\n        var /** @type {?} */ opposite = direction === Direction.forward ? Direction.backward : Direction.forward;\r\n        workflow.viewport.padding[opposite].size += workflow.clip[direction].size;\r\n    };\r\n    return Clip;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar WorkflowRunner = /** @class */ (function () {\r\n    function WorkflowRunner(context) {\r\n        this.count = 0;\r\n        this.defaultDirection = Direction.forward;\r\n        this.context = context;\r\n        this.workflow = new Workflow(this.context);\r\n        this.initialize();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.initialize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        var /** @type {?} */ flow = this.workflow;\r\n        var /** @type {?} */ onScroll = function ($event) { return _this.scroll($event); };\r\n        this.onScrollListener = this.context.renderer.listen(flow.viewport.scrollable, 'scroll', onScroll);\r\n        this.itemsSubscription = flow.buffer.$items.subscribe(function (items) { return _this.context.items = items; });\r\n        this.flowResolverSubscription = flow.resolver.subscribe(this.resolve.bind(this));\r\n        this.run();\r\n    };\r\n    /**\r\n     * @param {?} $event\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.scroll = /**\r\n     * @param {?} $event\r\n     * @return {?}\r\n     */\r\n    function ($event) {\r\n        if (this.workflow.viewport.syntheticScrollPosition !== null) {\r\n            if (this.workflow.viewport.scrollPosition === this.workflow.viewport.syntheticScrollPosition) {\r\n                this.workflow.viewport.syntheticScrollPosition = null;\r\n                return;\r\n            }\r\n            this.workflow.viewport.syntheticScrollPosition = null;\r\n        }\r\n        // debouncedRound(() => this.run(direction), 25);\r\n        this.run();\r\n    };\r\n    /**\r\n     * @param {?} next\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.resolve = /**\r\n     * @param {?} next\r\n     * @return {?}\r\n     */\r\n    function (next) {\r\n        if (this.newDirection) {\r\n            this.run(this.newDirection);\r\n            this.newDirection = null;\r\n        }\r\n        else if (next) {\r\n            this.run(this.workflow.direction);\r\n        }\r\n        else if (this.directionQueue) {\r\n            this.run(this.directionQueue);\r\n            this.directionQueue = null;\r\n        }\r\n        else {\r\n            this.count++;\r\n            this.finalize();\r\n        }\r\n    };\r\n    /**\r\n     * @param {?=} direction\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.run = /**\r\n     * @param {?=} direction\r\n     * @return {?}\r\n     */\r\n    function (direction) {\r\n        var _this = this;\r\n        if (!direction) {\r\n            direction = this.defaultDirection;\r\n            this.directionQueue =\r\n                direction === Direction.forward ? Direction.backward : Direction.forward;\r\n        }\r\n        if (this.workflow.pending) {\r\n            this.newDirection = direction;\r\n            return;\r\n        }\r\n        this.workflow.start(direction)\r\n            .then(function () { return _this.fetch(); })\r\n            .then(function () { return _this.clip(); })\r\n            .then(function () {\r\n            return _this.workflow.done();\r\n        })\r\n            .catch(function (error) {\r\n            return _this.workflow.fail(error);\r\n        });\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.fetch = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.workflow.continue()\r\n            .then(ShouldFetch.run)\r\n            .then(Fetch.run)\r\n            .then(ProcessFetch.run)\r\n            .then(Render.run)\r\n            .then(AdjustFetch.run);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.clip = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.workflow.settings.infinite ?\r\n            null :\r\n            this.workflow.continue()\r\n                .then(ShouldClip.run)\r\n                .then(Clip.run);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.dispose = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.onScrollListener();\r\n        this.itemsSubscription.unsubscribe();\r\n        this.flowResolverSubscription.unsubscribe();\r\n        this.workflow.dispose();\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    WorkflowRunner.prototype.finalize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        // stop queue\r\n    };\r\n    return WorkflowRunner;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar UiScrollComponent = /** @class */ (function () {\r\n    function UiScrollComponent(changeDetector, elementRef, renderer) {\r\n        this.changeDetector = changeDetector;\r\n        this.elementRef = elementRef;\r\n        this.renderer = renderer;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    UiScrollComponent.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.workflowRunner = new WorkflowRunner(this);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    UiScrollComponent.prototype.ngOnDestroy = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.workflowRunner.dispose();\r\n    };\r\n    UiScrollComponent.decorators = [\r\n        { type: core.Component, args: [{\r\n                    selector: 'ui-scroll',\r\n                    changeDetection: core.ChangeDetectionStrategy.OnPush,\r\n                    template: \"\\n<div data-padding-backward></div>\\n<div *ngFor=\\\"let item of items\\\" id=\\\"{{item.nodeId}}\\\">\\n  <div [style.position]=\\\"item.invisible ? 'fixed' : null\\\" [style.left]=\\\"item.invisible ? '-99999px' : null\\\" >\\n    <ng-template\\n      [ngTemplateOutlet]=\\\"template\\\"\\n      [ngTemplateOutletContext]=\\\"{\\n        $implicit: item.data,\\n        index: item.$index\\n     }\\\">\\n    </ng-template>\\n  </div>\\n</div>\\n<div data-padding-forward></div>\\n\"\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    UiScrollComponent.ctorParameters = function () { return [\r\n        { type: core.ChangeDetectorRef, },\r\n        { type: core.ElementRef, },\r\n        { type: core.Renderer2, },\r\n    ]; };\r\n    return UiScrollComponent;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar UiScrollDirective = /** @class */ (function () {\r\n    function UiScrollDirective(templateRef, viewContainer, resolver) {\r\n        this.templateRef = templateRef;\r\n        this.viewContainer = viewContainer;\r\n        this.resolver = resolver;\r\n    }\r\n    Object.defineProperty(UiScrollDirective.prototype, \"uiScrollOf\", {\r\n        set: /**\r\n         * @param {?} datasource\r\n         * @return {?}\r\n         */\r\n        function (datasource) {\r\n            this.datasource = datasource;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @return {?}\r\n     */\r\n    UiScrollDirective.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var /** @type {?} */ templateView = this.templateRef.createEmbeddedView({});\r\n        var /** @type {?} */ compFactory = this.resolver.resolveComponentFactory(UiScrollComponent);\r\n        var /** @type {?} */ componentRef = this.viewContainer.createComponent(compFactory, null, this.viewContainer.injector, [templateView.rootNodes]);\r\n        componentRef.instance.datasource = this.datasource;\r\n        componentRef.instance.template = this.templateRef;\r\n    };\r\n    UiScrollDirective.decorators = [\r\n        { type: core.Directive, args: [{ selector: '[uiScroll][uiScrollOf]' },] },\r\n    ];\r\n    /** @nocollapse */\r\n    UiScrollDirective.ctorParameters = function () { return [\r\n        { type: core.TemplateRef, },\r\n        { type: core.ViewContainerRef, },\r\n        { type: core.ComponentFactoryResolver, },\r\n    ]; };\r\n    UiScrollDirective.propDecorators = {\r\n        \"uiScrollOf\": [{ type: core.Input },],\r\n    };\r\n    return UiScrollDirective;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar UiScrollModule = /** @class */ (function () {\r\n    function UiScrollModule() {\r\n    }\r\n    UiScrollModule.decorators = [\r\n        { type: core.NgModule, args: [{\r\n                    declarations: [\r\n                        UiScrollComponent,\r\n                        UiScrollDirective\r\n                    ],\r\n                    imports: [common.CommonModule],\r\n                    entryComponents: [UiScrollComponent],\r\n                    exports: [UiScrollDirective],\r\n                    providers: []\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    UiScrollModule.ctorParameters = function () { return []; };\r\n    return UiScrollModule;\r\n}());\n\nexports.UiScrollModule = UiScrollModule;\nexports.ɵa = UiScrollComponent;\nexports.ɵb = UiScrollDirective;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=ngx-ui-scroll.umd.js.map\n"]}